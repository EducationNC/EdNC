!function(a,b,c,d,e,f,g,h,i,j){c(b).ready(function(){function j(){c(".tribe-events-day-time-slot").length&&(c(".tribe-events-day-time-slot").find(".vevent:last").addClass("tribe-events-last"),c(".tribe-events-day-time-slot:first").find(".vevent:first").removeClass("tribe-events-first"))}function k(a){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;var b=c("#tribe-bar-date").val();g.popping=!1,b.length?(g.date=c("#tribe-bar-date").val(),d.cur_url=d.default_permalinks?n+"="+d.cur_date:n+d.cur_date+"/"):(g.date=d.cur_date,d.cur_url=d.default_permalinks?n+"="+d.cur_date:n+d.cur_date+"/"),f.pre_ajax(function(){l()})}}function l(){f.invalid_date(g.date)||(g.pushcount=0,g.ajax_running=!0,g.popping||(g.url_params={},g.params={action:"tribe_event_day",eventDate:g.date},g.url_params={action:"tribe_event_day"},g.category&&(g.params.tribe_event_category=g.category),d.default_permalinks&&(g.url_params.hasOwnProperty("eventDate")||(g.url_params.eventDate=g.date),g.url_params.hasOwnProperty("post_type")||(g.url_params.post_type=i.events_post_type),g.url_params.hasOwnProperty("eventDisplay")||(g.url_params.eventDisplay=g.view)),c(e).trigger("tribe_ev_serializeBar"),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushstate=!0,g.do_string=!1,(g.pushcount>0||g.filters||d.default_permalinks)&&(g.pushstate=!1,g.do_string=!0)),h.pushstate&&!g.filter_cats?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_dayView_AjaxStart"),c("#tribe-events-content .tribe-events-loop").tribe_spin(),c.post(TribeCalendar.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:parseInt(a.total_count),view:a.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()};var h=c.parseHTML(a.html);c("#tribe-events-content").replaceWith(h),0===a.total_count&&c("#tribe-events-header .tribe-events-sub-nav").empty(),c(".tribe-events-promo").next(".tribe-events-promo").remove(),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&(-1!==d.cur_url.indexOf("?")&&(d.cur_url=d.cur_url.split("?")[0]),d.cur_url=d.cur_url+"?"+g.url_params,history.pushState({tribe_date:g.date,tribe_params:g.params},g.page_title,d.cur_url)),g.pushstate&&history.pushState({tribe_date:g.date,tribe_params:g.params},g.page_title,d.cur_url),j(),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_dayView_AjaxSuccess")}})):g.url_params.length?a.location=d.cur_url+"?"+g.url_params:a.location=d.cur_url)}var m=c('[class^="tribe-events-nav-"] a'),n="/";if("undefined"!=typeof i.events_base?n=i.events_base:m.length&&(n=m.first().attr("href").slice(0,-11)),g.filter_cats&&(n=c("#tribe-events-header").data("baseurl").slice(0,-11)),d.default_permalinks&&(n=n.split("?")[0]),g.date=c("#tribe-events-header").data("date"),j(),h.pushstate&&!h.map_view()){var o="action=tribe_event_day&eventDate="+g.date;d.params.length&&(o=o+"&"+d.params),g.category&&(o=o+"&tribe_event_category="+g.category),history.replaceState({tribe_params:o,tribe_url_params:d.params},"",location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,f.pre_ajax(function(){l()}),f.set_form(g.params))})}c("#tribe-events").on("click",".tribe-events-nav-previous a, .tribe-events-nav-next a",function(a){if(a.preventDefault(),!g.ajax_running&&!g.updating_picker){var b=c(this);g.popping=!1,g.date=b.attr("data-day"),g.filter_cats?d.cur_url=n+g.date+"/":d.cur_url=b.attr("href"),f.update_picker("0"!==g.datepicker_format?tribeDateFormat(g.date,d.datepicker_formats.main[g.datepicker_format]):g.date),f.pre_ajax(function(){l()})}}),f.snap("#tribe-events-bar","#tribe-events","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),c("form#tribe-bar-form").on("submit",function(a){k(a)}),(h.no_bar()||h.live_ajax()&&h.pushstate)&&c("#tribe-bar-date").on("changeDate",function(a){g.updating_picker||h.reset_on()||(g.popping=!1,"0"!==g.datepicker_format?g.date=tribeDateFormat(c(this).bootstrapDatepicker("getDate"),"tribeQuery"):g.date=c(this).val(),d.cur_url=d.default_permalinks?n:n+g.date+"/",f.pre_ajax(function(){l()}))}),c(e).on("tribe_ev_runAjax",function(){l()}),c(e).on("tribe_ev_updatingRecurrence",function(){g.filter_cats?d.cur_url=d.default_permalinks?n+"="+d.cur_date:n+d.cur_date+"/":d.cur_url=c("#tribe-events-header").attr("data-baseurl"),g.popping=!1})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);
jQuery(document).ready(function(b){function g(){var a=b(".tribe-mini-calendar-wrapper");if(b(".tribe-mini-calendar-wrapper.layout-wide").length&&b(".tribe-mini-calendar-right").length){var c=b(".tribe-mini-calendar-right"),e=a.height(),c=c.outerHeight(),c=c+20;c>e?a.css("height",c+"px"):a.css("height","auto")}else b(".tribe-mini-calendar-wrapper.layout-wide").length&&a.css("height","auto")}function m(a){b(".tribe-mini-calendar .tribe-events-thismonth").removeClass("tribe-mini-calendar-today");a.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}
var n=b(".tribe-mini-calendar-wrapper").parent();g();var f=new Date,h=f.getDate().toString(),k=(f.getMonth()+1).toString(),l=f.getFullYear().toString()+"-"+(k[1]?k:"0"+k[0])+"-"+(h[1]?h:"0"+h[0]),p=l.slice(0,7);n.on("click",".tribe-mini-calendar-nav-link",function(a){a.preventDefault();a=b(this);var c=a.closest(".tribe-mini-calendar"),e=a.closest(".tribe-mini-calendar-wrapper");a=a.attr("data-month");var d=a.slice(0,7);p==d&&(a=l);a={action:"tribe-mini-cal",eventDate:a,count:c.data("count"),tax_query:c.data("tax-query"),
nonce:c.data("nonce")};c.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();b.post(TribeMiniCalendar.ajaxurl,a,function(a){c.find(".tribe-mini-calendar-list-wrapper").remove();if(a.success){var d="",d=b.isFunction(b.fn.parseHTML)?b.parseHTML(a.html):a.html;c.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();e.replaceWith(d);g()}})}).on("click",".tribe-mini-calendar-day-link",function(a){a.preventDefault();
a=b(this);var c=a.attr("data-day"),e=a.text(),d=a.closest(".tribe-mini-calendar"),f=d.parent().siblings(".tribe-mini-calendar-list-wrapper");b("h2.tribe-mini-calendar-title").text(b("#tribe-mini-calendar-month-name").val()+" "+e+" Events");m(a);a={action:"tribe-mini-cal-day",eventDate:c,count:d.data("count"),tax_query:d.data("tax-query"),nonce:d.data("nonce")};d.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();b.post(TribeMiniCalendar.ajaxurl,a,
function(a){if(a.success){var c="",c=b.isFunction(b.fn.parseHTML)?b.parseHTML(a.html):a.html;d.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();f.replaceWith(c);g()}})})});
